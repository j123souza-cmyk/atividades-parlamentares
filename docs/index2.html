<!DOCTYPE html>
<html lang="pt-br">
<meta charset="UTF-8">
<title>Teste Votações</title>

<body>
<h2>Votações (teste)</h2>
<p id="status">Carregando...</p>
<pre id="out"></pre>

<script>
const BASE = "https://dadosabertos.camara.leg.br/api/v2";

const fim = new Date();
const inicio = new Date();
inicio.setDate(fim.getDate() - 30);

const url =
  `${BASE}/votacoes` +
  `?dataInicio=${inicio.toISOString().slice(0,10)}` +
  `&dataFim=${fim.toISOString().slice(0,10)}` +
  `&ordem=DESC&ordenarPor=dataHoraRegistro&itens=5`;

fetch(url)
  .then(r => r.json())
  .then(j => {
    const status = document.getElementById("status");
    status.parentNode.removeChild(status);

    out.textContent = JSON.stringify(j.dados, null, 2);
  })
  .catch(e => {
    document.getElementById("status").innerText = "Erro ao carregar";
    out.textContent = e.message;
  });
</script>
</body>
</html>
