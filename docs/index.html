<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Atividades Parlamentares</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

<style>
body { font-family: Arial, sans-serif; margin: 16px; }
nav button { margin-right: 8px; padding: 8px 12px; cursor: pointer; }

.aba { display: none; }
.ativa { display: block; }

.deputado {
  display: flex;
  gap: 10px;
  border-bottom: 1px solid #ddd;
  padding: 8px 0;
  cursor: pointer;
}

.deputado img { width: 60px; border-radius: 6px; }

#detalhe img { width: 120px; border-radius: 8px; }

details summary {
  cursor: pointer;
  font-weight: bold;
  margin-top: 6px;
}
</style>
</head>

<body>

<h1>Atividades Parlamentares</h1>

<nav>
  <button onclick="mostrar('lista')">Deputados</button>
  <button onclick="mostrar('detalhe')">Detalhes</button>
</nav>

<section id="lista" class="aba ativa">
  <p id="status">Carregando deputados...</p>
  <div id="listaDeputados"></div>
</section>

<section id="detalhe" class="aba">
  <h2 id="nomeDeputado"></h2>
  <img id="fotoDeputado">

  <h3>ðŸ“„ ProposiÃ§Ãµes apresentadas (Ãºltimos 12 meses)</h3>
  <ul id="proposicoesApresentadas"></ul>

  <h3>ðŸ“‘ VotaÃ§Ãµes (Ãºltimos 12 meses)</h3>
  <ul id="proposicoesVotadas"></ul>
</section>

<script>
const BASE = "https://dadosabertos.camara.leg.br/api/v2";
let deputados = [];

function mostrar(id) {
  document.querySelectorAll('.aba').forEach(a => a.classList.remove('ativa'));
  document.getElementById(id).classList.add('ativa');
}

/* ===== CARREGAR DEPUTADOS ===== */
fetch(`${BASE}/deputados?ordem=ASC&ordenarPor=nome`)
  .then(r => r.json())
  .then(json => {
    const statusEl = document.getElementById('status');
    if (statusEl) statusEl.remove();

    deputados = json.dados || [];
    renderizarLista(deputados);
  })
  .catch(err => {
