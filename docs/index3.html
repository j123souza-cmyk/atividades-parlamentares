<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Atuação Parlamentar – Aécio Neves</title>

<style>
body { font-family: Arial, sans-serif; background: #f4f6f8; padding: 20px; }
.container { max-width: 1100px; margin: auto; }
h1 { text-align: center; }
.accordion { background: #fff; border-radius: 8px; margin-bottom: 16px; box-shadow: 0 2px 6px rgba(0,0,0,.1); }
.accordion-header { padding: 15px; background: #1f5aa6; color: #fff; font-weight: bold; display: flex; justify-content: space-between; cursor: pointer; }
.accordion-content { display: none; padding: 20px; }
.item { border-left: 5px solid #1f5aa6; padding-left: 12px; margin-bottom: 14px; }
.label { font-weight: bold; }
.alerta {
    background: #fff3cd;
    border-left: 5px solid #ff9800;
    padding: 15px;
    border-radius: 6px;
    margin-bottom: 15px;
}
a { color: #1f5aa6; text-decoration: none; }
</style>
</head>

<body>
<div class="container">
    <h1>Atuação Parlamentar – Aécio Neves (PSDB-MG)</h1>

    <div class="accordion">
        <div class="accordion-header" onclick="toggle(this)">
            1️⃣ Proposições apresentadas ou associadas – Mandato atual
            <span>▼</span>
        </div>
        <div class="accordion-content" id="proposicoes">
            <p>Carregando dados…</p>
        </div>
    </div>
</div>

<script>
const DEPUTADO_ID = 74646;
const CORS_PROXY = "https://api.allorigins.win/raw?url=";

function toggle(header) {
    const content = header.nextElementSibling;
    const arrow = header.querySelector("span");
    content.style.display = content.style.display === "block" ? "none" : "block";
    arrow.textContent = content.style.display === "block" ? "▲" : "▼";
}

async function api(url) {
    const r = await fetch(CORS_PROXY + encodeURIComponent(url));
    const j = await r.json();
    return j.dados || [];
}

async function carregarProposicoes() {
    const el = document.getElementById("proposicoes");

    try {
        const dados = await api(
            `https://dadosabertos.camara.leg.br/api/v2/deputados/${DEPUTADO_ID}/proposicoes?itens=20&ordem=DESC&ordenarPor=ano`
        );

        if (!dados.length) {
            el.innerHTML = `
                <div class="alerta">
                    <p><strong>ℹ️ Informação oficial:</strong></p>
                    <p>Até o momento, não constam proposições registradas na base da Câmara
                    com autoria direta do deputado <strong>Aécio Neves</strong> no mandato atual (2023-2027).</p>
                    <p>Isso não impede sua atuação em votações, articulações políticas,
                    relatorias ou proposições coletivas apresentadas por bancadas ou lideranças.</p>
                </div>
            `;
            return;
        }

        el.innerHTML = "";
        dados.forEach(p => {
            el.innerHTML += `
                <div class="item">
                    <p class="label">${p.siglaTipo} ${p.numero}/${p.ano}</p>
                    <p>${p.ementa || "—"}</p>
                    <a href="${p.uri}" target="_blank">Ver na Câmara</a>
                </div>
            `;
        });

    } catch (e) {
        el.innerHTML = "<p>Erro ao carregar informações.</p>";
    }
}

document.addEventListener("DOMContentLoaded", carregarProposicoes);
</script>
</body>
</html>
